function battle:line/1/20
function battle:calc_cache
